.Dd July 3, 2025
.Dt PLAKAR-LS 1
.Os
.Sh NAME
.Nm plakar-ls
.Nd List snapshots and their contents in a Plakar repository
.Sh SYNOPSIS
.Nm plakar ls
.Op Fl uuid
.Op Fl name Ar name
.Op Fl category Ar category
.Op Fl environment Ar environment
.Op Fl perimeter Ar perimeter
.Op Fl job Ar job
.Op Fl tag Ar tag
.Op Fl latest
.Op Fl before Ar date
.Op Fl since Ar date
.Op Fl recursive
.Op Ar snapshotID : Ns Ar path
.Sh DESCRIPTION
The
.Nm plakar ls
command lists snapshots stored in a Plakar repository, and optionally
displays the contents of
.Ar path
in a specified snapshot.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl name Ar name
Only apply command to snapshots that match
.Ar name .
.It Fl category Ar category
Only apply command to snapshots that match
.Ar category .
.It Fl environment Ar environment
Only apply command to snapshots that match
.Ar environment .
.It Fl perimeter Ar perimeter
Only apply command to snapshots that match
.Ar perimeter .
.It Fl job Ar job
Only apply command to snapshots that match
.Ar job .
.It Fl tag Ar tag
Filter snapshots by the specified tag, listing only those that contain
the given tag.
.It Fl latest
Only apply command to latest snapshot matching filters.
.It Fl before Ar date
Only apply command to snapshots matching filters and older than the specified
date.
Accepted formats include relative durations
.Pq e.g. "2d" for two days, "1w" for one week
or specific dates in various formats
.Pq e.g. "2006-01-02 15:04:05" .
.It Fl since Ar date
Only apply command to snapshots matching filters and created since the specified
date, included.
Accepted formats include relative durations
.Pq e.g. "2d" for two days, "1w" for one week
or specific dates in various formats
.Pq e.g. "2006-01-02 15:04:05" .
.It Fl uuid
Display the full UUID for each snapshot instead of the shorter
snapshot ID.
.It Fl recursive
List directory contents recursively when exploring snapshot contents.
.El
.Sh EXAMPLES
List all snapshots with their short IDs:
.Bd -literal -offset indent
$ plakar ls
.Ed
.Pp
List all snapshots with UUIDs instead of short IDs:
.Bd -literal -offset indent
$ plakar ls -uuid
.Ed
.Pp
List snapshots with a specific tag:
.Bd -literal -offset indent
$ plakar ls -tag daily-backup
.Ed
.Pp
List contents of a specific snapshot:
.Bd -literal -offset indent
$ plakar ls abc123
.Ed
.Pp
Recursively list contents of a specific snapshot:
.Bd -literal -offset indent
$ plakar ls -recursive abc123:/etc
.Ed
.Sh DIAGNOSTICS
.Ex -std
.Bl -tag -width Ds
.It 0
Command completed successfully.
.It >0
An error occurred, such as failure to retrieve snapshot information or
invalid snapshot ID.
.El
.Sh SEE ALSO
.Xr plakar 1
